<div class="container mt-4">
  <div class="card shadow-sm border-0 rounded-3" *ngIf="justificacion">
    <!-- 🔹 Encabezado -->
    <div class="card-header bg-light-blue text-dark text-center py-3 rounded-top">
      <h3 class="mb-0"><i class="fas fa-file-alt me-2"></i> Revisión de Justificación</h3>
      <p class="small text-muted mb-0">Detalles de la justificación presentada</p>
    </div>

    <!-- 🔹 Cuerpo -->
    <div *ngIf="justificacion" class="card-body px-4 py-3">
      <!-- Sección de Información -->
      <div class="row">
        <div class="col-md-4">
          <label class="fw-bold text-dark">Alumno</label>
          <p class="form-control-plaintext text-muted">{{ justificacion.asistencia.alumno.nombre }} {{ justificacion.asistencia.alumno.apellido }}</p>
        </div>
        <div class="col-md-4">
          <label class="fw-bold text-dark">Curso</label>
          <p class="form-control-plaintext text-muted">{{ justificacion.asistencia.clase.curso.nombre }}</p>
        </div>
        <div class="col-md-4">
          <label class="fw-bold text-dark">Evidencia</label><br>
          <button class="btn btn-outline-primary btn-sm mt-1 shadow-sm" (click)="descargarArchivo()">
            <i class="bi bi-download me-1"></i> Descargar Evidencia
          </button>
        </div>
        
      </div>

      <hr class="my-3">

      <div class="row">
        <div class="col-md-12">
          <label class="fw-bold text-dark">Motivo de Justificación</label>
          <div class="alert alert-info p-2 text-muted fst-italic">
            {{ justificacion.motivo }}
          </div>
        </div>
      </div>

      <hr class="my-3">

      <div class="row">
        <div class="col-md-4">
          <label class="fw-bold text-dark">Fecha de Presentación</label>
          <p class="form-control-plaintext text-muted">{{ justificacion.fechaPresentacion | date:'dd/MM/yyyy' }}</p>
        </div>
        <div class="col-md-4">
          <label class="fw-bold text-dark">Hora de Clase</label>
          <p class="form-control-plaintext text-muted">{{ justificacion.asistencia.clase.horaInicio }} - {{ justificacion.asistencia.clase.horaFin }}</p>
        </div>

        <!-- 🔹 Select para cambiar estado -->
        <div class="col-md-4">
          <label class="fw-bold text-dark">Estado de la Asistencia</label>
          <select class="form-select shadow-sm" [(ngModel)]="nuevoEstado">
            <option value="Justificado">Justificado</option>
          </select>
        </div>
      </div>
    </div>

    <!-- 🔹 Cargando -->
    <div *ngIf="!justificacion" class="text-center py-4">
      <p class="text-muted"><i class="fas fa-spinner fa-spin me-2"></i> Cargando información...</p>
    </div>

    <!-- 🔹 Botones de Guardar y Regreso -->
    <div class="card-footer bg-light text-center py-3 rounded-bottom">
      <button class="btn btn-outline-secondary px-4 shadow-sm me-3" (click)="regresar()">
        <i class="fas fa-arrow-left me-2"></i> Volver
      </button>
      <button class="btn btn-success px-4 shadow-sm" (click)="guardarEstado()" [disabled]="justificacion.asistencia.estado === nuevoEstado">
        <i class="fas fa-save me-2"></i> Guardar Cambios
      </button>
    </div>
  </div>
</div>
